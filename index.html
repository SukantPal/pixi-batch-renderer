<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>PixiJS Batch Rendering Library API Documentation</title>
    
    <meta name="description" content="Documentation for pixi-batch-renderer library" />
    
        <meta name="keywords" content="docs, documentation, pixi, pixijs, renderer, html5, javascript, jsdoc" />
        <meta name="keyword" content="docs, documentation, pixi, pixijs, renderer, html5, javascript, jsdoc" />
    
    
    
    
    <meta property="og:title" content=""/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content=""/>
    
    <meta property="og:url" content=""/>
    
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <script src="scripts/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link href="https://fonts.googleapis.com/css?family=Libre+Franklin:400,700" rel="stylesheet">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/main.css">

    
    <script>
    var config = {"monospaceLinks":false,"cleverLinks":false,"default":{"outputSourceFiles":true},"applicationName":"pixi-batch-renderer","footer":"Made with ♥ by Shukant Pal","copyright":"Copyright © 2019 Shukant Pal","disqus":"","openGraph":{"title":"","type":"website","image":"","site_name":"","url":""},"meta":{"title":"PixiJS Batch Rendering Library API Documentation","description":"Documentation for pixi-batch-renderer library","keyword":"docs, documentation, pixi, pixijs, renderer, html5, javascript, jsdoc"},"linenums":true,"sort":false};
    </script>
    

    
</head>
<body>
<div id="wrap" class="clearfix">
    
<div class="navigation">
    <h3 class="applicationName"><a href="index.html">pixi-batch-renderer</a></h3>
    <button id="menuToggle" class="btn btn-link btn-lg menu-toggle">
        <span class="glyphicon glyphicon-menu-hamburger"></span>
    </button>
    <div class="search">
        <input id="search" type="text" class="form-control input-md" placeholder="Search...">
    </div>
    <ul class="list">
    
    
        <li class="item" data-name="PIXI.brend">
            <span class="title namespace ">
                
                <span class="namespaceTag">
                    <span class="glyphicon glyphicon-folder-open"></span>
                </span>
                
                
                    <a href="PIXI.brend.html">PIXI.brend</a>
                
            </span>
            
            <ul class="members itemMembers">
            
            </ul>
            
            <ul class="typedefs itemMembers">
            
            </ul>
            
            <ul class="typedefs itemMembers">
            
            <span class="subtitle">Interfaces</span>
            
                <li class="parent" data-name="PIXI.brend.IBatchGeometryFactory"><a href="PIXI.brend.IBatchGeometryFactory.html">IBatchGeometryFactory</a></li>
            
            </ul>
            
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent  " data-name="PIXI.brend.InjectorFunction"><a href="PIXI.brend.html#.InjectorFunction">InjectorFunction</a></li>
            
                <li class="parent  " data-name="PIXI.brend#IGeometryMerger"><a href="PIXI.brend.html#IGeometryMerger">IGeometryMerger</a></li>
            
            </ul>
            
            <ul class="events itemMembers">
            
            </ul>
            
        </li>
    
        <li class="item" data-name="PIXI.brend.AttributeRedirect">
            <span class="title  ">
                
                
                    <a href="PIXI.brend.AttributeRedirect.html">PIXI.brend.AttributeRedirect</a>
                
            </span>
            
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li class="parent " data-name="PIXI.brend.AttributeRedirect#glSize"><a href="PIXI.brend.AttributeRedirect.html#glSize">glSize</a></li>
            
                <li class=" " data-name="PIXI.brend.AttributeRedirect#glslIdentifer"><a href="PIXI.brend.AttributeRedirect.html#glslIdentifer">glslIdentifer</a></li>
            
                <li class="parent " data-name="PIXI.brend.AttributeRedirect#glType"><a href="PIXI.brend.AttributeRedirect.html#glType">glType</a></li>
            
                <li class="parent " data-name="PIXI.brend.AttributeRedirect#normalize"><a href="PIXI.brend.AttributeRedirect.html#normalize">normalize</a></li>
            
                <li class="parent " data-name="PIXI.brend.AttributeRedirect#properSize"><a href="PIXI.brend.AttributeRedirect.html#properSize">properSize</a></li>
            
                <li class="parent " data-name="PIXI.brend.AttributeRedirect#size"><a href="PIXI.brend.AttributeRedirect.html#size">size</a></li>
            
                <li class=" " data-name="PIXI.brend.AttributeRedirect#source"><a href="PIXI.brend.AttributeRedirect.html#source">source</a></li>
            
                <li class="parent " data-name="PIXI.brend.AttributeRedirect#type"><a href="PIXI.brend.AttributeRedirect.html#type">type</a></li>
            
            </ul>
            
            <ul class="typedefs itemMembers">
            
            </ul>
            
            <ul class="typedefs itemMembers">
            
            </ul>
            
            <ul class="methods itemMembers">
            
            </ul>
            
            <ul class="events itemMembers">
            
            </ul>
            
        </li>
    
        <li class="item" data-name="PIXI.brend.BatchDrawer">
            <span class="title  ">
                
                
                    <a href="PIXI.brend.BatchDrawer.html">PIXI.brend.BatchDrawer</a>
                
            </span>
            
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li class="parent " data-name="PIXI.brend.BatchDrawer#renderer"><a href="PIXI.brend.BatchDrawer.html#renderer">renderer</a></li>
            
            </ul>
            
            <ul class="typedefs itemMembers">
            
            </ul>
            
            <ul class="typedefs itemMembers">
            
            </ul>
            
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent  " data-name="PIXI.brend.BatchDrawer#draw"><a href="PIXI.brend.BatchDrawer.html#draw">draw</a></li>
            
            </ul>
            
            <ul class="events itemMembers">
            
            </ul>
            
        </li>
    
        <li class="item" data-name="PIXI.brend.BatchGeometryFactory">
            <span class="title  ">
                
                
                    <a href="PIXI.brend.BatchGeometryFactory.html">PIXI.brend.BatchGeometryFactory</a>
                
            </span>
            
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li class="parent " data-name="PIXI.brend.BatchGeometryFactory#_geometryPool"><a href="PIXI.brend.BatchGeometryFactory.html#_geometryPool">_geometryPool</a></li>
            
                <li class="parent " data-name="PIXI.brend.BatchGeometryFactory#geometryMerger"><a href="PIXI.brend.BatchGeometryFactory.html#geometryMerger">geometryMerger</a></li>
            
            </ul>
            
            <ul class="typedefs itemMembers">
            
            </ul>
            
            <ul class="typedefs itemMembers">
            
            </ul>
            
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent  " data-name="PIXI.brend.BatchGeometryFactory#append"><a href="PIXI.brend.BatchGeometryFactory.html#append">append</a></li>
            
                <li class="parent  " data-name="PIXI.brend.BatchGeometryFactory#build"><a href="PIXI.brend.BatchGeometryFactory.html#build">build</a></li>
            
                <li class="parent  " data-name="PIXI.brend.BatchGeometryFactory#getAttributeBuffer"><a href="PIXI.brend.BatchGeometryFactory.html#getAttributeBuffer">getAttributeBuffer</a></li>
            
                <li class="parent  " data-name="PIXI.brend.BatchGeometryFactory#getIndexBuffer"><a href="PIXI.brend.BatchGeometryFactory.html#getIndexBuffer">getIndexBuffer</a></li>
            
                <li class="parent  " data-name="PIXI.brend.BatchGeometryFactory#init"><a href="PIXI.brend.BatchGeometryFactory.html#init">init</a></li>
            
                <li class="parent  " data-name="PIXI.brend.BatchGeometryFactory#release"><a href="PIXI.brend.BatchGeometryFactory.html#release">release</a></li>
            
            </ul>
            
            <ul class="events itemMembers">
            
            </ul>
            
        </li>
    
        <li class="item" data-name="PIXI.brend.BatchRenderer">
            <span class="title  ">
                
                
                    <a href="PIXI.brend.BatchRenderer.html">PIXI.brend.BatchRenderer</a>
                
            </span>
            
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li class="parent " data-name="PIXI.brend.BatchRenderer#_attribRedirects"><a href="PIXI.brend.BatchRenderer.html#_attribRedirects">_attribRedirects</a></li>
            
                <li class="parent " data-name="PIXI.brend.BatchRenderer#_BatchDrawerClass"><a href="PIXI.brend.BatchRenderer.html#_BatchDrawerClass">_BatchDrawerClass</a></li>
            
                <li class="parent " data-name="PIXI.brend.BatchRenderer#_batchFactory"><a href="PIXI.brend.BatchRenderer.html#_batchFactory">_batchFactory</a></li>
            
                <li class="parent " data-name="PIXI.brend.BatchRenderer#_BatchFactoryClass"><a href="PIXI.brend.BatchRenderer.html#_BatchFactoryClass">_BatchFactoryClass</a></li>
            
                <li class="parent " data-name="PIXI.brend.BatchRenderer#_BatchGeometryFactoryClass"><a href="PIXI.brend.BatchRenderer.html#_BatchGeometryFactoryClass">_BatchGeometryFactoryClass</a></li>
            
                <li class="parent " data-name="PIXI.brend.BatchRenderer#_drawer"><a href="PIXI.brend.BatchRenderer.html#_drawer">_drawer</a></li>
            
                <li class="parent " data-name="PIXI.brend.BatchRenderer#_geometryFactory"><a href="PIXI.brend.BatchRenderer.html#_geometryFactory">_geometryFactory</a></li>
            
                <li class="parent " data-name="PIXI.brend.BatchRenderer#_inBatchIDAttrib"><a href="PIXI.brend.BatchRenderer.html#_inBatchIDAttrib">_inBatchIDAttrib</a></li>
            
                <li class="parent " data-name="PIXI.brend.BatchRenderer#_indexProperty"><a href="PIXI.brend.BatchRenderer.html#_indexProperty">_indexProperty</a></li>
            
                <li class="parent " data-name="PIXI.brend.BatchRenderer#_shaderFunction"><a href="PIXI.brend.BatchRenderer.html#_shaderFunction">_shaderFunction</a></li>
            
                <li class="parent " data-name="PIXI.brend.BatchRenderer#_stateFunction"><a href="PIXI.brend.BatchRenderer.html#_stateFunction">_stateFunction</a></li>
            
                <li class="parent " data-name="PIXI.brend.BatchRenderer#_texIDAttrib"><a href="PIXI.brend.BatchRenderer.html#_texIDAttrib">_texIDAttrib</a></li>
            
                <li class="parent " data-name="PIXI.brend.BatchRenderer#_textureProperty"><a href="PIXI.brend.BatchRenderer.html#_textureProperty">_textureProperty</a></li>
            
                <li class="parent " data-name="PIXI.brend.BatchRenderer#_texturesPerObject"><a href="PIXI.brend.BatchRenderer.html#_texturesPerObject">_texturesPerObject</a></li>
            
                <li class="parent " data-name="PIXI.brend.BatchRenderer#_uniformRedirects"><a href="PIXI.brend.BatchRenderer.html#_uniformRedirects">_uniformRedirects</a></li>
            
                <li class="parent " data-name="PIXI.brend.BatchRenderer#_vertexCountProperty"><a href="PIXI.brend.BatchRenderer.html#_vertexCountProperty">_vertexCountProperty</a></li>
            
            </ul>
            
            <ul class="typedefs itemMembers">
            
            </ul>
            
            <ul class="typedefs itemMembers">
            
            </ul>
            
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent  " data-name="PIXI.brend.BatchRenderer#contextChange"><a href="PIXI.brend.BatchRenderer.html#contextChange">contextChange</a></li>
            
                <li class="parent  " data-name="PIXI.brend.BatchRenderer#flush"><a href="PIXI.brend.BatchRenderer.html#flush">flush</a></li>
            
                <li class="parent  " data-name="PIXI.brend.BatchRenderer#render"><a href="PIXI.brend.BatchRenderer.html#render">render</a></li>
            
                <li class="parent  " data-name="PIXI.brend.BatchRenderer#start"><a href="PIXI.brend.BatchRenderer.html#start">start</a></li>
            
                <li class="parent  " data-name="PIXI.brend.BatchRenderer#stop"><a href="PIXI.brend.BatchRenderer.html#stop">stop</a></li>
            
            </ul>
            
            <ul class="events itemMembers">
            
            </ul>
            
        </li>
    
        <li class="item" data-name="PIXI.brend.BatchRendererPluginFactory">
            <span class="title  ">
                
                
                    <a href="PIXI.brend.BatchRendererPluginFactory.html">PIXI.brend.BatchRendererPluginFactory</a>
                
            </span>
            
            <ul class="members itemMembers">
            
            </ul>
            
            <ul class="typedefs itemMembers">
            
            </ul>
            
            <ul class="typedefs itemMembers">
            
            </ul>
            
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent  " data-name="PIXI.brend.BatchRendererPluginFactory.from"><a href="PIXI.brend.BatchRendererPluginFactory.html#.from">from</a></li>
            
            </ul>
            
            <ul class="events itemMembers">
            
            </ul>
            
        </li>
    
        <li class="item" data-name="PIXI.brend.BatchShaderFactory">
            <span class="title  ">
                
                
                    <a href="PIXI.brend.BatchShaderFactory.html">PIXI.brend.BatchShaderFactory</a>
                
            </span>
            
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li class="parent " data-name="PIXI.brend.BatchShaderFactory#disableVertexShaderTemplate"><a href="PIXI.brend.BatchShaderFactory.html#disableVertexShaderTemplate">disableVertexShaderTemplate</a></li>
            
            </ul>
            
            <ul class="typedefs itemMembers">
            
            </ul>
            
            <ul class="typedefs itemMembers">
            
            </ul>
            
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent  " data-name="PIXI.brend.BatchShaderFactory#derive"><a href="PIXI.brend.BatchShaderFactory.html#derive">derive</a></li>
            
            </ul>
            
            <ul class="events itemMembers">
            
            </ul>
            
        </li>
    
        <li class="item" data-name="PIXI.brend.Redirect">
            <span class="title  ">
                
                
                    <a href="PIXI.brend.Redirect.html">PIXI.brend.Redirect</a>
                
            </span>
            
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li class="parent " data-name="PIXI.brend.Redirect#glslIdentifer"><a href="PIXI.brend.Redirect.html#glslIdentifer">glslIdentifer</a></li>
            
                <li class="parent " data-name="PIXI.brend.Redirect#source"><a href="PIXI.brend.Redirect.html#source">source</a></li>
            
            </ul>
            
            <ul class="typedefs itemMembers">
            
            </ul>
            
            <ul class="typedefs itemMembers">
            
            </ul>
            
            <ul class="methods itemMembers">
            
            </ul>
            
            <ul class="events itemMembers">
            
            </ul>
            
        </li>
    
        <li class="item" data-name="PIXI.brend.StdBatch">
            <span class="title  ">
                
                
                    <a href="PIXI.brend.StdBatch.html">PIXI.brend.StdBatch</a>
                
            </span>
            
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li class="parent " data-name="PIXI.brend.StdBatch#geometryOffset"><a href="PIXI.brend.StdBatch.html#geometryOffset">geometryOffset</a></li>
            
                <li class="parent " data-name="PIXI.brend.StdBatch#state"><a href="PIXI.brend.StdBatch.html#state">state</a></li>
            
                <li class="parent " data-name="PIXI.brend.StdBatch#textureBuffer"><a href="PIXI.brend.StdBatch.html#textureBuffer">textureBuffer</a></li>
            
                <li class="parent " data-name="PIXI.brend.StdBatch#uidMap"><a href="PIXI.brend.StdBatch.html#uidMap">uidMap</a></li>
            
            </ul>
            
            <ul class="typedefs itemMembers">
            
            </ul>
            
            <ul class="typedefs itemMembers">
            
            </ul>
            
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent  " data-name="PIXI.brend.StdBatch#reset"><a href="PIXI.brend.StdBatch.html#reset">reset</a></li>
            
                <li class="parent  " data-name="PIXI.brend.StdBatch#upload"><a href="PIXI.brend.StdBatch.html#upload">upload</a></li>
            
            </ul>
            
            <ul class="events itemMembers">
            
            </ul>
            
        </li>
    
        <li class="item" data-name="PIXI.brend.StdBatchFactory">
            <span class="title  ">
                
                
                    <a href="PIXI.brend.StdBatchFactory.html">PIXI.brend.StdBatchFactory</a>
                
            </span>
            
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li class="parent " data-name="PIXI.brend.StdBatchFactory#_batchBuffer"><a href="PIXI.brend.StdBatchFactory.html#_batchBuffer">_batchBuffer</a></li>
            
                <li class="parent " data-name="PIXI.brend.StdBatchFactory#_batchCount"><a href="PIXI.brend.StdBatchFactory.html#_batchCount">_batchCount</a></li>
            
                <li class="parent " data-name="PIXI.brend.StdBatchFactory#_batchPool"><a href="PIXI.brend.StdBatchFactory.html#_batchPool">_batchPool</a></li>
            
                <li class="parent " data-name="PIXI.brend.StdBatchFactory#_renderer"><a href="PIXI.brend.StdBatchFactory.html#_renderer">_renderer</a></li>
            
                <li class="parent " data-name="PIXI.brend.StdBatchFactory#_textureBuffer"><a href="PIXI.brend.StdBatchFactory.html#_textureBuffer">_textureBuffer</a></li>
            
                <li class="parent " data-name="PIXI.brend.StdBatchFactory#_textureCount"><a href="PIXI.brend.StdBatchFactory.html#_textureCount">_textureCount</a></li>
            
                <li class="parent " data-name="PIXI.brend.StdBatchFactory#_textureLimit"><a href="PIXI.brend.StdBatchFactory.html#_textureLimit">_textureLimit</a></li>
            
                <li class="parent " data-name="PIXI.brend.StdBatchFactory#_textureProperty"><a href="PIXI.brend.StdBatchFactory.html#_textureProperty">_textureProperty</a></li>
            
            </ul>
            
            <ul class="typedefs itemMembers">
            
            </ul>
            
            <ul class="typedefs itemMembers">
            
            </ul>
            
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent  " data-name="PIXI.brend.StdBatchFactory#_buildBatch"><a href="PIXI.brend.StdBatchFactory.html#_buildBatch">_buildBatch</a></li>
            
                <li class="parent  " data-name="PIXI.brend.StdBatchFactory#_newBatch"><a href="PIXI.brend.StdBatchFactory.html#_newBatch">_newBatch</a></li>
            
                <li class="parent  " data-name="PIXI.brend.StdBatchFactory#_nextBatch"><a href="PIXI.brend.StdBatchFactory.html#_nextBatch">_nextBatch</a></li>
            
                <li class="parent  " data-name="PIXI.brend.StdBatchFactory#_put"><a href="PIXI.brend.StdBatchFactory.html#_put">_put</a></li>
            
                <li class="parent  " data-name="PIXI.brend.StdBatchFactory#access"><a href="PIXI.brend.StdBatchFactory.html#access">access</a></li>
            
                <li class="parent  " data-name="PIXI.brend.StdBatchFactory#build"><a href="PIXI.brend.StdBatchFactory.html#build">build</a></li>
            
                <li class="parent  " data-name="PIXI.brend.StdBatchFactory#put"><a href="PIXI.brend.StdBatchFactory.html#put">put</a></li>
            
                <li class="parent  " data-name="PIXI.brend.StdBatchFactory#ready"><a href="PIXI.brend.StdBatchFactory.html#ready">ready</a></li>
            
                <li class="parent  " data-name="PIXI.brend.StdBatchFactory#reset"><a href="PIXI.brend.StdBatchFactory.html#reset">reset</a></li>
            
                <li class="parent  " data-name="PIXI.brend.StdBatchFactory#size"><a href="PIXI.brend.StdBatchFactory.html#size">size</a></li>
            
            </ul>
            
            <ul class="events itemMembers">
            
            </ul>
            
        </li>
    
    </ul>
</div>

    <div class="main">
        <h1 class="page-title" data-filename="index.html">Index</h1>
        


    


    <h3> </h3>








    




    <section>
        <article class="readme content-size"><p><a target="_blank" href="https://www.jsdelivr.com/package/npm/pixi-batch-renderer-alpha"><img src="https://data.jsdelivr.com/v1/package/npm/pixi-batch-renderer-alpha/badge" alt=""></a></p>
<h1>PixiJS Batch Rendering Library</h1>
<p><code>pixi-batch-renderer</code> is a PixiJS plugin that allows you to add batch rendering to your custom display objects. I have documented each class in the <code>PIXI.brend</code> namespace.</p>
<h2>Concepts</h2>
<p><a target="_blank" href="https://medium.com/swlh/inside-pixijs-batch-rendering-system-fad1b466c420">Batch rendering</a> objects involves aggregating them into groups/batches and rendering them together with one WebGL draw call. PixiJS supports batch rendering its internal display objects - <code>PIXI.Sprite</code>, <code>PIXI.Graphics</code>, and <code>PIXI.Mesh</code>. However, it is difficult to extend that to custom-built display objects; it wasn't designed as an exposable API.</p>
<p>This library builds upon the same concept and is designed for maximum flexibility. It still uses PixiJS's batch system - a stub that enables objects to be rendered asynchronously, without loosing the order of rendering. To understand how it works, understanding these things are helpful:</p>
<ul>
<li>
<p><strong>Attribute Redirects</strong>: An attribute redirect is a data-object that tells <code>pixi-batch-renderer</code> how it will transform your object into a set of shader attributes.</p>
</li>
<li>
<p><strong>Index Property</strong>: If you use indices, this will be property on your display object that holds those indices. It could also be a constant array, rather than a property on each object.</p>
</li>
<li>
<p><strong>State Function</strong>: This function/property tells the batch renderer what WebGL state is required to render a display-object. It is optional if you're display objects use the default state (<code>PIXI.State.for2d()</code>).</p>
</li>
<li>
<p><strong>Shader Function</strong>: This function generates the shader to render whole batches. It takes one argument - the batch renderer
that will use the shader. You can use the <code>BatchShaderFactory#derive()</code> API for create one.</p>
</li>
</ul>
<h3>New features</h3>
<ul>
<li>
<p><strong>Shader Templates</strong>: The <code>BatchShaderFactory</code> allows you to write shader &quot;templates&quot; containing <code>%macros%</code>. At runtime, you
can replace these macros based with another expression. For example, the (built-in) <code>%texturesPerBatch%</code> macro is set to the
no. of textures units in the GPU.</p>
</li>
<li>
<p><strong>Custom uniforms</strong>: [Experimental] You can also use uniforms in the batch shader; however, this might reduce the batching
efficiency if most batchable display-objects have different values for uniforms (because then they can't be batched together).</p>
</li>
<li>
<p><strong>Modular architecture</strong>: With the modular architecture of this library, you change the behaviour of any component. The
geometry composition, batch generation, and drawing stages are componentized and can be modified by providing a custom
implementation to <code>BatchRendererPluginFactory.from</code>.</p>
</li>
</ul>
<h3>Caveat with filtered/masked objects</h3>
<p>Before rendering itself, a <code>PIXI.Container</code> with filters or a mask will flush the batch renderer and will not batch itself. This
is because the PixiJS batch renderer cannot batch filtered and masked objects. Although this does not break pixi-batch-renderer,
it does reduce batching-efficiency. If you want to create a batch renderer that will batch filtered and masked objects too, your display-object must override <code>render</code> (<strong>however, you will have to derive your own batch renderer class for that</strong>):</p>
<pre class="prettyprint source"><code>render(renderer: PIXI.Renderer): void
{
  // If you registered the batch renderer as a plugin &quot;pluginName&quot;, then replace &lt;BatchRenderer> with
  // renderer.plugins.pluginName
  renderer.setObjectRenderer(&lt;BatchRenderer>);
  &lt;BatchRenderer>.render(this);

  for (let i = 0, j = this.children.length; i &lt; j; i++)
  {
      this._children.render(renderer);
  }
}
</code></pre>
<h1>Usage</h1>
<h3>Standard Pipeline</h3>
<p>For most use cases, <code>PIXI.brend.BatchRendererPluginFactory</code> is all you'll need from this library. You need to do these three things:</p>
<ol>
<li>
<p><strong>Generate the plugin class using <code>PIXI.brend.BatchRendererPluginFactory.from</code></strong></p>
</li>
<li>
<p><strong>Register the plugin with PixiJS's WebGL renderer</strong></p>
</li>
<li>
<p><strong>Make your custom display object defer its rendering to your plugin</strong></p>
</li>
</ol>
<p>An example implementation would look like:</p>
<pre class="prettyprint source lang-js"><code>import * as PIXI from 'pixi.js';
import { AttributeRedirect, BatchRendererPluginFactory, BatchShaderFactory } from 'pixi-batch-renderer';

// ExampleFigure has two attributes: aVertex and aTextureCoord. They come from the
// vertices and uvs properties in this object. The indices are in the indices property.
class ExampleFigure extends PIXI.Container
{
  _render(renderer)
  {
    this.vertices = [x0,y0, x1,y1, x2,y2, ..., xn,yn];// variable number of vertices
    this.uvs = [u0,v0, u1,v1, u2, v2, ..., un,yn];// however, all other attributes must have equal length
    this.texture = PIXI.Texture.from(&quot;url:example&quot;);

    this.indices = [0, 1, 2, ..., n];// we could also tell our batch renderer to not use indices too :)

    renderer.setObjectRenderer(renderer.plugins[&quot;ExampleRenderer&quot;]);
    renderer.plugins[&quot;ExampleRenderer&quot;].render(this);
  }
}

// Define the geometry of ExampleFigure.
const attribSet = [
  new AttributeRedirect({
      source: &quot;vertices&quot;, 
      attrib: &quot;aVertex&quot;, 
      type: 'float32', 
      size: 2, 
      glType: PIXI.TYPES.FLOAT, 
      glSize: 2
  }),
  new AttributeRedirect({
      source: &quot;uvs&quot;, 
      attrib: &quot;aTextureCoord&quot;, 
      type: 'float32', 
      size: 2, 
      glType: PIXI.TYPES.FLOAT, 
      size: 2
  }),
];

// Create a shader function from a shader template!
const shaderFunction = new BatchShaderFactory(
// Vertex Shader
`
attribute vec2 aVertex;
attribute vec2 aTextureCoord;
attribute float aTextureId;

varying float vTextureId;
varying vec2 vTextureCoord;

uniform mat3 projectionMatrix;

void main()
{
    gl_Position = vec4((projectionMatrix * vec3(aVertex.xy, 1), 0, 1);
    vTextureId = aTextureId;
    vTextureCoord = aTextureCoord;
}
`,

// Fragment Shader
`
uniform uSamplers[%texturesPerBatch%];/* %texturesPerBatch% is a macro and will become a number */\
varying float vTextureId;
varying vec2 vTextureCoord;

void main(void){
    vec4 color;

    /* get color, which is the pixel in texture uSamplers[vTextureId] @ vTextureCoord */
    for (int k = 0; k &lt; %texturesPerBatch%; ++k)
    {
        if (int(vTextureId) == k)
            color = texture2D(uSamplers[k], vTextureCoord);

    }

    gl_FragColor = color;
}
`,
{}).derive();

// Create batch renderer class
const ExampleRenderer = BatchRendererPluginFactory.from({
    attribSet,
    indexProperty: &quot;indices&quot;,
    textureProperty: &quot;texture&quot;,
    texIDAttrib: &quot;aTextureId&quot;, // this will be used to locate the texture in the fragment shader later
    shaderFunction
});

// Remember to do this before instantiating a PIXI.Application or PIXI.Renderer!
PIXI.Renderer.registerPlugin(&quot;ExampleRenderer&quot;, ExampleRenderer);
</code></pre>
<h3>Uniforms Pipeline [Experimental]</h3>
<p>You can take advantage of shader uniforms in batching too! pixi-batch-renderer supports this out of the box
with the <code>AggregateUniformsBatchFactory</code>. Adding to the previous example,</p>
<pre class="prettyprint source lang-js"><code>const { UniformRedirect, AggregateUniformsBatchFactory } = require('pixi-batch-renderer');

const shaderFunction = new BatchShaderFactory(
// Vertex Shader
`
attribute vec2 aVertex;
attribute vec2 aTextureCoord;
attribute float aTextureId;
attribute float aUniformId;

varying float vTextureId;
varying vec2 vTextureCoord;
varying float vUniformId;

uniform mat3 projectionMatrix;

void main()
{
    gl_Position = vec4((projectionMatrix * vec3(aVertex.xy, 1), 0, 1);
    vTextureId = aTextureId;
    vTextureCoord = aTextureCoord;

    vUniformId = aUniformId;
}
`,

// Fragment Shader
`
// You can also use this in the vertex shader.
uniform shaderType[%uniformsPerBatch%];
varying float vUniformId;

uniform uSamplers[%texturesPerBatch%];/* %texturesPerBatch% is a macro and will become a number */\
varying float vTextureId;
varying vec2 vTextureCoord;

void main(void){
    vec4 color;
    float type;

    /* get color & shaderType */
    for (int k = 0; k &lt; max(%texturesPerBatch%); ++k)
    {
        if (int(vTextureId) == k) {
            color = texture2D(uSamplers[k], vTextureCoord);
        }
        if (int(vUniformId) == k) {
            type = shaderType[vUniformId];
        }
    }


    gl_FragColor = type == 1 ? color : vec4(color.rgb, 1);
}
`,
{}).derive();

const uniformSet = [
  new UniformRedirect({ source: &quot;type&quot;, uniform: &quot;shadingType&quot; });
];

const ExampleRenderer = BatchRendererPluginFactory.from({
  uniformSet,
  inBatchAttribID: &quot;aUniformId&quot;,

  // Previous example's stuff
  attribSet,
  indexProperty: &quot;indices&quot;,
  textureProperty: &quot;texture&quot;,
  texIDAttrib: &quot;aTextureId&quot;,
  shaderFunction,

  BatchFactoryClass: AggregateUniformsBatchFactory
})
</code></pre>
<h3>Advanced/Customized Batch Generation</h3>
<p>The <code>BatchRendererPluginFactory.from</code> method also accepts these (optional) options that can be used to extend the
behaviour of built-in components:</p>
<ul>
<li>
<p><code>BatchFactoryClass</code>: Child class of <a target="_blank" href="https://pixijs.io/pixi-batch-renderer/PIXI.brend.StdBatchFactory.html">StdBatchFactory</a></p>
</li>
<li>
<p><code>BatchGeometryClass</code>: Child class of <a target="_blank" href="https://pixijs.io/pixi-batch-renderer/PIXI.brend.BatchGeometryFactory.html">BatchGeometry</a></p>
</li>
<li>
<p><code>BatchDrawerClass</code>: Child class of <a target="_blank" href="https://pixijs.io/pixi-batch-renderer/PIXI.brend.BatchDrawer.html">BatchDrawer</a></p>
</li>
<li>
<p><code>BatchRendererClass</code>: If overriding a component does not meet your requirements, you can derive your own batch renderer by
providing a child class of <a target="_blank" href="https://pixijs.io/pixi-batch-renderer/PIXI.brend.BatchRenderer.html">BatchRenderer</a></p>
</li>
</ul></article>
    </section>






        

        <footer class="content-size">
            <div class="footer">
                Documentation generated by <a target="_blank" href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.4</a> on Sat Apr 11 2020 16:17:41 GMT-0400 (Eastern Daylight Time)
            </div>
        </footer>
    </div>
</div>
<script>prettyPrint();</script>
<script src="scripts/main.js"></script>


</body>
</html>